#!/usr/bin/env bash

# Pull the latest changes for each Git repository found in the current directory.

# Find all Git repositories recursively.
repos=$(find . -type d -name ".git")

# Pull the latest changes for each repository.
for repo in $repos; do
    repo_dir=$(dirname "$repo")
    echo -e "\nPulling latest changes for repository in $(tput bold)${repo_dir##*/}$(tput sgr0)..."
    if ! output=$(git -C "$repo_dir" pull 2>&1); then
        echo "$(tput setaf 1)$(tput bold)$output$(tput sgr0)"
    else
        echo "$(tput setaf 2)$output$(tput sgr0)"
    fi
done
